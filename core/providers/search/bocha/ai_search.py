from typing import Dict,Any
from .base import Base

class Freshness():
    ONE_DAY = "oneDay"
    ONE_WEEK = "oneWeek"
    ONE_MONTH = "oneMonth"
    ONE_YEAR = "oneYear"
    NO_LIMIT = "noLimit"
    

class AISearch(Base):
    def __init__(
            self,
            **kwargs,
    ):
        super().__init__(
            model="ai-search",
            **kwargs
        )

        self.description = DESCRIPTION

        self.example_queries = EXAMPLE_QUERIES

    async def run(self,query:str,freshness:Freshness=Freshness.NO_LIMIT,answer:bool=False,count:int=50,stream:bool=False) -> Dict[str,Any]:
        data = {
            "query": query,
            "freshness": freshness,
            "answer": answer,
            "count": count,
            "stream" : stream
        }
        
        rt = await super().run(data)

        try:
            rt = rt["messages"]
            rt = [x["content"] for x in rt if x["content_type"] not in ["video","image"]]
        except:
            raise Exception(f'Failed to parse response: {rt}')

        return rt
    

DESCRIPTION = """
AI搜索支持以下垂直领域的深度搜索：

1. 天气查询（weather）
   - 支持查询国内外天气信息
   - 可查询实时天气、天气预报
   - 支持多城市天气对比
   - 提供天气预警信息

2. 百科查询（baike）
   - 提供全面的百科知识内容
   - 涵盖历史、文化、科学等领域
   - 支持多维度知识检索
   - 提供权威可靠的信息来源

3. 医疗查询（medical）
   - 提供权威医疗健康信息
   - 涵盖疾病症状、预防、治疗
   - 支持医疗知识科普
   - 提供健康生活建议

4. 万年历查询（calendar）
   - 提供精确的日历信息
   - 支持节日、节气查询
   - 可查询历史日期
   - 提供日期换算功能

5. 火车查询（train）
   - 提供火车时刻表查询
   - 支持票价信息查询
   - 可查询车次、站点信息
   - 提供余票查询功能

6. 星座属相查询（star）
   - 提供星座运势查询
   - 支持属相配对查询
   - 可查询星座性格分析
   - 提供运势预测功能

7. 贵金属查询（gold）
   - 提供实时金价查询
   - 支持期货价格查询
   - 可查询价格走势
   - 提供投资分析建议

8. 汇率查询（exchangerate）
   - 提供实时汇率信息
   - 支持多币种汇率换算
   - 可查询汇率走势
   - 提供汇率计算器

9. 油价查询（oil）
   - 提供各地油价信息
   - 支持不同型号油价查询
   - 可查询油价调整信息
   - 提供油价走势分析

10. 手机参数查询（phone）
    - 提供手机参数对比
    - 支持详细配置查询
    - 可查询手机评测
    - 提供购买建议

11. 股票查询（stock）
    - 提供实时股票行情
    - 支持股票价格查询
    - 可查询股票走势
    - 提供市场分析

12. 汽车查询（car）
    - 提供车型库查询
    - 支持汽车参数对比
    - 可查询汽车评测
    - 提供购车建议

13. 新闻资讯（news）
    - 提供实时新闻推送
    - 支持热点新闻查询
    - 可查询专题报道
    - 提供新闻分类浏览

14. 体育赛事（sports）
    - 提供赛事直播信息
    - 支持赛程查询
    - 可查询比赛结果
    - 提供球队数据

15. 电影娱乐（movie）
    - 提供电影信息查询
    - 支持影评查询
    - 可查询票房数据
    - 提供观影指南

16. 美食菜谱（food）
    - 提供菜谱查询
    - 支持食材搭配
    - 可查询烹饪技巧
    - 提供营养分析

17. 旅游攻略（travel）
    - 提供景点信息
    - 支持路线规划
    - 可查询旅游攻略
    - 提供住宿推荐

18. 教育学习（education）
    - 提供课程信息
    - 支持考试资料
    - 可查询学习资源
    - 提供教育资讯

19. 房产信息（house）
    - 提供房源信息
    - 支持房价查询
    - 可查询房产政策
    - 提供购房指南

20. 招聘求职（job）
    - 提供职位信息
    - 支持简历投递
    - 可查询薪资行情
    - 提供求职攻略

21. 音乐娱乐（music）
    - 提供音乐搜索
    - 支持歌词查询
    - 可查询歌手信息
    - 提供音乐推荐

22. 游戏资讯（game）
    - 提供游戏攻略
    - 支持游戏资讯
    - 可查询游戏评测
    - 提供游戏推荐

23. 数码产品（digital）
    - 提供产品信息
    - 支持参数对比
    - 可查询评测报告
    - 提供购买建议

24. 母婴用品（baby）
    - 提供产品信息
    - 支持育儿知识
    - 可查询使用指南
    - 提供选购建议

25. 宠物服务（pet）
    - 提供宠物信息
    - 支持宠物医疗
    - 可查询宠物用品
    - 提供饲养指南

26. 法律咨询（law）
    - 提供法律知识
    - 支持案例查询
    - 可查询法律法规
    - 提供法律咨询

27. 金融理财（finance）
    - 提供理财产品
    - 支持投资分析
    - 可查询理财知识
    - 提供理财建议

28. 保险服务（insurance）
    - 提供保险产品
    - 支持保险咨询
    - 可查询理赔指南
    - 提供投保建议

29. 装修设计（decoration）
    - 提供设计方案
    - 支持材料查询
    - 可查询装修知识
    - 提供装修建议

30. 婚恋服务（dating）
    - 提供婚恋信息
    - 支持婚恋咨询
    - 可查询婚恋知识
    - 提供婚恋建议

31. 价格查询（price）
    - 提供商品价格查询
    - 支持历史价格对比
    - 可查询价格走势
    - 提供优惠信息
"""

EXAMPLE_QUERIES = [
    # 天气查询
    "北京今天天气怎么样？",
    "上海未来一周天气预报",
    "纽约现在天气如何？",
    "东京明天会下雨吗？",
    
    # 百科查询
    "什么是人工智能？",
    "长城的历史简介",
    "太阳系八大行星",
    "中国四大发明是什么？",
    
    # 医疗查询
    "感冒的症状有哪些？",
    "高血压的注意事项",
    "糖尿病的早期症状",
    "如何预防流感？",
    
    # 万年历查询
    "2024年春节是几号？",
    "今年端午节是哪天？",
    "2025年元旦是星期几？",
    "下个月有什么节日？",
    
    # 火车查询
    "北京到上海的高铁时刻表",
    "广州到深圳的火车票价格",
    "成都到重庆的动车班次",
    "杭州到南京的火车时刻",
    
    # 星座属相查询
    "白羊座今日运势",
    "2024年属龙人的运势",
    "金牛座和什么星座最配",
    "属相相冲查询",
    
    # 贵金属查询
    "今日黄金价格",
    "白银期货实时行情",
    "铂金价格走势",
    "黄金回收价格",
    
    # 汇率查询
    "美元兑人民币汇率",
    "欧元兑日元汇率",
    "港币兑人民币汇率",
    "英镑兑美元汇率",
    
    # 油价查询
    "北京92号汽油价格",
    "上海95号汽油价格",
    "深圳0号柴油价格",
    "全国油价调整最新消息",
    
    # 手机参数查询
    "iPhone 15和华为Mate 60对比",
    "小米14 Pro参数配置",
    "OPPO Find X7和vivo X100对比",
    "最新手机性价比排行",
    
    # 股票查询
    "贵州茅台股票行情",
    "腾讯股票实时价格",
    "阿里巴巴股票走势",
    "上证指数今日行情",
    
    # 汽车查询
    "比亚迪汉和特斯拉Model 3对比",
    "最新SUV销量排行榜",
    "20万左右性价比最高的轿车",
    "新能源汽车推荐",
    
    # 新闻资讯
    "今日热点新闻",
    "最新科技新闻",
    "国际新闻头条",
    "财经新闻速递",
    
    # 体育赛事
    "NBA最新赛程",
    "世界杯预选赛结果",
    "欧冠联赛直播",
    "中国女排比赛时间",
    
    # 电影娱乐
    "最新上映电影",
    "电影票房排行榜",
    "热门电影影评",
    "电影院排期",
    
    # 美食菜谱
    "红烧肉的做法",
    "家常菜谱大全",
    "营养早餐食谱",
    "减肥餐食谱",
    
    # 旅游攻略
    "北京旅游攻略",
    "三亚旅游路线",
    "日本旅游签证",
    "欧洲旅游攻略",
    
    # 教育学习
    "考研复习资料",
    "英语四六级备考",
    "教师资格证考试",
    "高考志愿填报",
    
    # 房产信息
    "北京房价走势",
    "上海二手房信息",
    "深圳租房信息",
    "最新房产政策",
    
    # 招聘求职
    "北京IT行业招聘",
    "上海金融行业薪资",
    "深圳互联网公司",
    "最新招聘信息",
    
    # 音乐娱乐
    "周杰伦最新歌曲",
    "热门歌曲排行榜",
    "经典老歌推荐",
    "音乐节信息",
    
    # 游戏资讯
    "最新游戏推荐",
    "王者荣耀攻略",
    "游戏直播平台",
    "游戏赛事信息",
    
    # 数码产品
    "最新笔记本电脑",
    "相机推荐",
    "智能手表对比",
    "数码产品评测",
    
    # 母婴用品
    "婴儿奶粉推荐",
    "儿童玩具选择",
    "孕妇营养品",
    "育儿知识",
    
    # 宠物服务
    "宠物医院推荐",
    "狗粮品牌对比",
    "猫咪用品推荐",
    "宠物美容服务",
    
    # 法律咨询
    "劳动合同纠纷",
    "交通事故处理",
    "房产纠纷咨询",
    "婚姻法律问题",
    
    # 金融理财
    "基金投资建议",
    "理财产品推荐",
    "股票投资策略",
    "理财知识",
    
    # 保险服务
    "重疾险推荐",
    "车险价格对比",
    "保险理赔流程",
    "保险产品对比",
    
    # 装修设计
    "现代简约风格",
    "装修材料选择",
    "装修预算计算",
    "装修公司推荐",
    
    # 婚恋服务
    "相亲活动信息",
    "婚恋网站推荐",
    "婚礼策划方案",
    "婚恋心理辅导",
    
    # 价格查询
    "iPhone 15最新价格",
    "茅台酒今日价格",
    "黄金首饰价格",
    "最新显卡价格"
]